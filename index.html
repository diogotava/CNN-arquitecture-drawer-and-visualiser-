<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural network visualizer</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.js"></script>
    <script src="https://kit.fontawesome.com/298fd45b46.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="Scripts/sketch.js"></script>
    <script src="Scripts/default_values.js"></script>
    <script src="Scripts/Objects/Layer.js"></script>
    <script src="Scripts/Objects/Block.js"></script>
    <script src="Scripts/utils.js"></script>
    <script src="Scripts/ui.js"></script>
    <script src="Scripts/colorSettings.js"></script>
    <script src="Scripts/layerPosition.js"></script>
    <script src="Scripts/utils_graphics.js"></script>
    <script src="Scripts/drawingArrows.js"></script>
    <script src="Scripts/drawingLayers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"
        integrity="sha512-zhHQR0/H5SEBL3Wn6yYSaTTZej12z0hVZKOv3TwCUXT1z5qeqGcXJLLrbERYRScEDDpYIJhPC1fk31gqR783iQ=="
        crossorigin="anonymous" defer></script>
    <link href="Scripts/style.css" rel="stylesheet" type="text/css">

</head>

<body>
    <div id="column2">
    </div>
    <div id="column1">
        <div class="loader" id="loader"></div>
        <form id="upload-form">
            <label id="inputLabel" class="button-12">
                <input type="file" id="model-file" name="model-file" />
                <i class="fa fa-cloud-upload"></i>
                <p id="modelFileLabel"><b>Choose Model File</b></p>
            </label><br>
            <button class="button-12" type="submit">Upload</button>
        </form>
        <div>
            <button class="button-12" id="exportImage">Export Image</button>
            <button class="button-12" id="settingsButton">Open Settings</button>
        </div>

        <h2 id="nothing_selected_h2">Nothing Selected!</h2>

        <div id="layerInfo" class="bubble-bottom">
            <h2 id="selected_h2" hidden><b>Selected layer:</b> </h2>
            <p id="type" hidden><b>Type: </b></p>
            <p id="input_shape" hidden><b>Input shape: </b></p>
            <p id="output_shape" hidden><b>Output shape: </b></p>
            <p id="activation" hidden><b>Activation: </b></p>
            <p hidden id="batchNormalization"><b>Batch normalization: </b></p>
        </div>


        <div id="settingsPopup">
            <h2>Settings</h2>
            <div id="settingsDiv">
                <form id="settingsForm">
                    <fieldset id="upload-settings-file">
                        <form>
                            <label id="inputSettingsFileLabel" class="button-12" style="display: inline;">
                                <input type="file" id="settings-file" name="settings-file" accept=".json" />
                                <i class="fa fa-cloud-upload"></i>
                                <p id="settingsFileLabel" style="display: inline; font-size: 14px;">Settings File</p>
                            </label>
                            <button class="button-12" id="buttonUploadSettingsFile" type="submit">Upload</button>
                        </form>
                        <a class="button-12" href="Scripts/template.json" download="template.json">
                            <i class="fa fa-cloud-download"></i>
                            Template
                        </a><br>
                        <p style="font-size: 10px;">Note: Only the data (tags) contained in the template file (except
                            layer colors that can be added more) will be
                            considered!</p>
                    </fieldset>

                    <fieldset>
                        <legend>Camera Position</legend>
                        <form>
                            <label for="camX">X</label>
                            <input type="number" class="fieldsetInput" step="1" id="camX" name="camX" value="500">

                            <label for="camY">Y</label>
                            <input type="number" class="fieldsetInput" step="1" id="camY" name="camY" value="-500">

                            <label for="camZ">Z</label>
                            <input type="number" class="fieldsetInput" step="1" id="camZ" name="camZ" value="400"><br>
                        </form>
                        <legend>Look position</legend>
                        <form>
                            <label for="lookX">X</label>
                            <input type="number" class="fieldsetInput" step="1" id="lookX" name="lookX" value="500">

                            <label for="lookY">Y</label>
                            <input type="number" class="fieldsetInput" step="1" id="lookY" name="lookY" value="0">

                            <label for="lookZ">Z</label>
                            <input type="number" class="fieldsetInput" step="1" id="lookZ" name="lookZ" value="0"><br>

                            <input type="reset" class="button-12" value="Reset">
                        </form>
                    </fieldset>

                    <fieldset>
                        <legend>Arrow</legend>
                        <form>
                            <label for="arrowWidth">Width</label>
                            <input type="number" class="fieldsetInput" step="0.1" id="arrowWidth" name="arrowWidth"
                                value="0.4">

                            <label for="arrowHeight">Height</label>
                            <input type="number" class="fieldsetInput" id="arrowHeight" name="arrowHeight" value="3">

                            <label for="arrowPointRadius">Radius</label>
                            <input type="number" class="fieldsetInput" step="0.1" id="arrowPointRadius"
                                name="arrowPointRadius" value="1.5"><br>

                            <input type="reset" class="button-12" value="Reset">
                        </form>
                    </fieldset>

                    <fieldset>
                        <legend>Sensitivity</legend>
                        <form>
                            <label for="sensitivityX">X</label>
                            <input type="number" class="fieldsetInput" step="0.0001" id="sensitivityX"
                                name="sensitivityX" value="1">

                            <label for="sensitivityY">Y</label>
                            <input type="number" class="fieldsetInput" step="0.0001" id="sensitivityY"
                                name="sensitivityY" value="1">

                            <label for="sensitivityZ">Z</label>
                            <input type="number" class="fieldsetInput" step="0.01" id="sensitivityZ" name="sensitivityZ"
                                value="0.11"><br>

                            <input type="reset" class="button-12" value="Reset">
                        </form>
                    </fieldset>

                    <fieldset>
                        <legend>Layer Length</legend>
                        <form>
                            <label for="minLength">Min:</label>
                            <input type="number" class="fieldsetInput" id="minLength" name="minLength" value="5">

                            <label for="maxLength">Max:</label>
                            <input type="number" class="fieldsetInput" id="maxLength" name="maxLength" value="400">

                            <input type="reset" class="button-12" value="Reset"><br>
                        </form>
                    </fieldset>

                    <fieldset>
                        <legend>Layer Width/Height</legend>

                        <form>
                            <label for="minWidth">Min:</label>
                            <input type="number" class="fieldsetInput" id="minWidth" name="minWidth" value="2">

                            <label for="maxWidth">Max:</label>
                            <input type="number" class="fieldsetInput" id="maxWidth" name="maxWidth" value="200">

                            <input type="reset" class="button-12" value="Reset"><br>
                        </form>
                    </fieldset>

                    <form>
                        <label for="dimensionType">Layers dimensions:</label>
                        <select class="settingsFormSelect" name="dimensionType" id="dimensionType"
                            onchange="layersChanged = true;">
                            <option>Exponential</option>
                            <option>Real</option>
                            <option>Linear</option>
                        </select>

                        <input type="reset" class="button-12" value="Reset">
                    </form>

                    <form>
                        <label for="spaceBetweenLayers">Space between layers:</label>
                        <input type="number" class="settingsFormInput" id="spaceBetweenLayers" name="spaceBetweenLayers"
                            value="10">

                        <input type="reset" class="button-12" value="Reset"><br>
                    </form>

                    <form>
                        <label for="lateralSpaceBetweenLayers">Lateral space between layers:</label>
                        <input type="number" class="settingsFormInput" id="lateralSpaceBetweenLayers"
                            name="lateralSpaceBetweenLayers" value="10">

                        <input type="reset" class="button-12" value="Reset"><br>
                    </form>

                    <form>
                        <label for="blockSize">Block size:</label>
                        <input type="number" class="settingsFormInput" id="blockSize" name="blockSize" value="10">

                        <input type="reset" class="button-12" value="Reset"><br>
                    </form>

                    <button class="button-12" id="settingsColorsButton">Open layer color Settings</button>

                    <input type="reset" class="button-12" value="Reset">
                </form>
            </div>
            <button class="button-12" type="submit" id="saveSettings">Save</button>
            <button class="button-12" id="settingsCloseButton">Close</button>
        </div>

        <div id="blockPopup">
            <h2>Settings</h2>
            <div id="blockDiv">
                <form id="blockForm">
                    <label for="blockName">Block name:</label>
                    <input type="text" id="blockName" name="blockName">
                    <label for="blockColor">Block color:</label>
                    <input type="color" id="blockColor" name="blockColor" value="#000000">
                </form>
            </div>
            <button class="button-12" type="submit" id="saveBlock">Save</button>
            <button class="button-12" id="cancelBlock">Cancel</button>
        </div>


        <div id="settingsColorsPopup">
            <h2>Layers Color Settings</h2>
            <div class="checkbox-wrapper-14">
                <label for="resetPrevious" style="margin-right: 5px;">Reset to the default color</label>
                <input id="resetPrevious" type="checkbox" class="switch">
                <label for="resetPrevious">Reset to the color previous saving</label>
            </div>
            <div id="settingsColorsDiv">
                <form id="settingsColorsForm">
                    <form>
                        <label class="colorLabel" for="Dense">Dense:</label>
                        <input type="color" id="Dense" name="Dense" value="#ff0000">
                        <button class="button-12" id="resetDense">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Flatten">Flatten:</label>
                        <input type="color" id="Flatten" name="Flatten" value="#ff00ff">
                        <button class="button-12" id="resetFlatten">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Dropout">Dropout:</label>
                        <input type="color" id="Dropout" name="Dropout" value="#00FFFF">
                        <button class="button-12" id="resetDropout">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Input">Input:</label>
                        <input type="color" id="Input" name="Input" value="#FFFF00">
                        <button class="button-12" id="resetInput">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Concatenate">Concatenate:</label>
                        <input type="color" id="Concatenate" name="Concatenate" value="#80FFFF">
                        <button class="button-12" id="resetConcatenate">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Add">Add:</label>
                        <input type="color" id="Add" name="Add" value="#AAC8FF">
                        <button class="button-12" id="resetAdd">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="LSTM">LSTM:</label>
                        <input type="color" id="LSTM" name="LSTM" value="#FF0096">
                        <button class="button-12" id="resetLSTM">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="GRU">GRU:</label>
                        <input type="color" id="GRU" name="GRU" value="#FF0096">
                        <button class="button-12" id="resetGRU">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="SimpleRNN">SimpleRNN:</label>
                        <input type="color" id="SimpleRNN" name="SimpleRNN" value="#FF0096">
                        <button class="button-12" id="resetSimpleRNN">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="TimeDistributed">TimeDistributed:</label>
                        <input type="color" id="TimeDistributed" name="TimeDistributed" value="#FF0096">
                        <button class="button-12" id="resetTimeDistributed">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Bidirectional">Bidirectional:</label>
                        <input type="color" id="Bidirectional" name="Bidirectional" value="#FF0096">
                        <button class="button-12" id="resetBidirectional">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="BaseRNN">BaseRNN:</label>
                        <input type="color" id="BaseRNN" name="BaseRNN" value="#FF0096">
                        <button class="button-12" id="resetBaseRNN">Reset</button>
                    </form>

                    <fieldset>
                        <legend>Convolutional LSTM</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-14" type="checkbox" class="switch" onchange="allConvLSTMSameColor();">
                            <label for="s1-14">All with the same color</label>
                        </div>
                        <div id="colorsConvLSTM" class="colors">
                            <form id="ConvLSTMColor1">
                                <label id="ConvLSTM1DLabel" for="ConvLSTM1D">1D:</label>
                                <input type="color" id="ConvLSTM1D" name="ConvLSTM1D" value="#FF0096"><br>
                                <button class="button-12" id="resetConvLSTM1D">Reset</button>
                            </form>

                            <form id="ConvLSTMColor2">
                                <label for="ConvLSTM2D">2D:</label>
                                <input type="color" id="ConvLSTM2D" name="ConvLSTM2D" value="#FF0096"><br>
                                <button class="button-12" id="resetConvLSTM2D">Reset</button>
                            </form>

                            <form id="ConvLSTMColor3">
                                <label for="ConvLSTM3D">3D:</label>
                                <input type="color" id="ConvLSTM3D" name="ConvLSTM3D" value="#FF0096"><br>
                                <button class="button-12" id="resetConvLSTM3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Convolutional / Convolutional Transpose</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-15" type="checkbox" class="switch" onchange="allConvSameColor();">
                            <label for="s1-15">All with the same color</label>
                        </div>

                        <div id="colorsConv" class="colors">
                            <form id="ConvColor1">
                                <label id="Conv1DLabel" for="Conv1D">1D:</label>
                                <input type="color" id="Conv1D" name="Conv1D" value="#00ff00"><br>
                                <button class="button-12" id="resetConv1D">Reset</button>
                            </form>

                            <form id="ConvColor2">
                                <label for="Conv2D">2D:</label>
                                <input type="color" id="Conv2D" name="Conv2D" value="#00ff00"><br>
                                <button class="button-12" id="resetConv2D">Reset</button>
                            </form>

                            <form id="ConvColor3">
                                <label for="Conv3D">3D:</label>
                                <input type="color" id="Conv3D" name="Conv3D" value="#00ff00"><br>
                                <button class="button-12" id="resetConv3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Max pooling</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-16" type="checkbox" class="switch" onchange="allMaxPoolingSameColor();">
                            <label for="s1-16">All with the same color</label>
                        </div>

                        <div id="colorsMaxPooling" class="colors">
                            <form id="MaxPoolingColor1">
                                <label id="MaxPooling1DLabel" for="MaxPooling1D">1D:</label>
                                <input type="color" id="MaxPooling1D" name="MaxPooling1D" value="#323296"><br>
                                <button class="button-12" id="resetMaxPooling1D">Reset</button>
                            </form>

                            <form id="MaxPoolingColor2">
                                <label for="MaxPooling2D">2D:</label>
                                <input type="color" id="MaxPooling2D" name="MaxPooling2D" value="#323296"><br>
                                <button class="button-12" id="resetMaxPooling2D">Reset</button>
                            </form>

                            <form id="MaxPoolingColor3">
                                <label for="MaxPooling3D">3D:</label>
                                <input type="color" id="MaxPooling3D" name="MaxPooling3D" value="#323296"><br>
                                <button class="button-12" id="resetMaxPooling3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Average pooling</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-17" type="checkbox" class="switch" onchange="allAveragePoolingSameColor();">
                            <label for="s1-17">All with the same color</label>
                        </div>

                        <div id="colorsAveragePooling" class="colors">
                            <form id="AveragePoolingColor1">
                                <label id="AveragePooling1DLabel" for="AveragePooling1D">1D:</label>
                                <input type="color" id="AveragePooling1D" name="AveragePooling1D" value="#323296"><br>
                                <button class="button-12" id="resetAveragePooling1D">Reset</button>
                            </form>

                            <form id="AveragePoolingColor2">
                                <label for="AveragePooling2D">2D:</label>
                                <input type="color" id="AveragePooling2D" name="AveragePooling2D" value="#323296"><br>
                                <button class="button-12" id="resetAveragePooling2D">Reset</button>
                            </form>

                            <form id="AveragePoolingColor3">
                                <label for="AveragePooling3D">3D:</label>
                                <input type="color" id="AveragePooling3D" name="AveragePooling3D" value="#323296"><br>
                                <button class="button-12" id="resetAveragePooling3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Global max pooling</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-18" type="checkbox" class="switch" onchange="allGlobalMaxPoolingSameColor();">
                            <label for="s1-18">All with the same color</label>
                        </div>

                        <div id="colorsGlobalMaxPooling" class="colors">
                            <form id="GlobalMaxPoolingColor1">
                                <label id="GlobalMaxPooling1DLabel" for="GlobalMaxPooling1D">1D:</label>
                                <input type="color" id="GlobalMaxPooling1D" name="GlobalMaxPooling1D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalMaxPooling1D">Reset</button>
                            </form>

                            <form id="GlobalMaxPoolingColor2">
                                <label for="GlobalMaxPooling2D">2D:</label>
                                <input type="color" id="GlobalMaxPooling2D" name="GlobalMaxPooling2D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalMaxPooling2D">Reset</button>
                            </form>

                            <form id="GlobalMaxPoolingColor3">
                                <label for="GlobalMaxPooling3D">3D:</label>
                                <input type="color" id="GlobalMaxPooling3D" name="GlobalMaxPooling3D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalMaxPooling3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend>Global average pooling</legend>

                        <div class="checkbox-wrapper-14">
                            <input id="s1-19" type="checkbox" class="switch"
                                onchange="allGlobalAveragePoolingSameColor();">
                            <label for="s1-19">All with the same color</label>
                        </div>

                        <div id="colorsGlobalAveragePooling" class="colors">
                            <form id="GlobalAveragePoolingColor1">
                                <label id="GlobalAveragePooling1DLabel" for="GlobalAveragePooling1D">1D:</label>
                                <input type="color" id="GlobalAveragePooling1D" name="GlobalAveragePooling1D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalAveragePooling1D">Reset</button>
                            </form>

                            <form id="GlobalAveragePoolingColor2">
                                <label for="GlobalAveragePooling2D">2D:</label>
                                <input type="color" id="GlobalAveragePooling2D" name="GlobalAveragePooling2D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalAveragePooling2D">Reset</button>
                            </form>

                            <form id="GlobalAveragePoolingColor3">
                                <label for="GlobalAveragePooling3D">3D:</label>
                                <input type="color" id="GlobalAveragePooling3D" name="GlobalAveragePooling3D"
                                    value="#323296"><br>
                                <button class="button-12" id="resetGlobalAveragePooling3D">Reset</button>
                            </form>
                        </div>
                    </fieldset>

                    <form>
                        <label class="colorLabel" for="Reshape">Reshape:</label>
                        <input type="color" id="Reshape" name="Reshape" value="#FA8000">
                        <button class="button-12" id="resetReshape">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Default">Default:</label>
                        <input type="color" id="Default" name="Default" value="#808080">
                        <button class="button-12" id="resetDefault">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Block">Block:</label>
                        <input type="color" id="Block" name="Block" value="#000000">
                        <button class="button-12" id="resetBlock">Reset</button>
                    </form>

                    <form>
                        <label class="colorLabel" for="Selected">Selected:</label>
                        <input type="color" id="Selected" name="Selected" value="#0000FF">
                        <button class="button-12" id="resetSelected">Reset</button>
                    </form>

                </form>
            </div>
            <button class="button-12" id="settingsColorsSaveButton" type="submit">Save</button>
            <button class="button-12" id="settingsColorsCloseButton">Close</button>
        </div>
    </div>

</body>

</html>